<!DOCTYPE html>
<html>
<head>
    <title>{{ dept }} Department</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body { background-color: #f5f7fa; }
        .table-container { background:white; padding:20px; border-radius:10px; box-shadow:0 2px 10px rgba(0,0,0,0.1); }
        th { background-color: #343a40 !important; color: white !important; }
    </style>
</head>

<body>
<div class="container mt-5">

    <h2 class="mb-4 text-center">{{ dept }} Department Tickets</h2>

    <div class="table-container">
        <table class="table table-bordered table-hover">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Project Type</th>
                    <th>Owner</th>
                    <th>Status</th>
                    <th>Priority</th>
                    <th>Time Required</th>
                    <th>Created At</th>
                </tr>
            </thead>

            <tbody>
                {% for p in projects %}
                <tr>
                    <td>{{ p.id }}</td>
                    <td>{{ p.project_type }}</td>
                    <td>{{ p.owner_email }}</td>
                    <td>
                        {% if p.status == 'pending' %}
                            <span class="badge bg-warning text-dark">Pending</span>
                        {% else %}
                            <span class="badge bg-success">Resolved</span>
                        {% endif %}
                    </td>

                    <td>
                        {% if p.priority == 'HIGH' %}
                            <span class="badge bg-danger">High</span>
                        {% elif p.priority == 'MEDIUM' %}
                            <span class="badge bg-primary">Medium</span>
                        {% else %}
                            <span class="badge bg-secondary">Low</span>
                        {% endif %}
                    </td>

                    <td>{{ p.time_required }}</td>
                    <td>{{ p.created_at }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="text-center mt-3">
        <a href="/" class="btn btn-secondary">Back to Departments</a>
    </div>

</div>
</body>
</html>
